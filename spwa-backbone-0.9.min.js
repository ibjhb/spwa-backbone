(function(){window.page=Backbone.Model.extend({});window.sitepages=Backbone.Collection.extend({model:page});window.pages=new sitepages;window.pageView=Backbone.View.extend({tagName:"div",className:"page",initialize:function(){_.bindAll(this,"render");this.model.bind("change",this.render);this.model.view=this;this.render()},render:function(){$(this.el).html($(this.model.get("htmlTemplate")).html()).attr("id",this.model.get("id"));return this}});window.site=Backbone.Controller.extend({el:$("body"),
routes:{"!:pageName":"show"},initialize:function(a){a.each(function(a,b){var b=$(b),c={id:b.attr("id").split("-")[0],htmlTemplate:"#"+b.attr("id")};pages.add(c)});window.Backbone.history.getFragment()==""&&this.show("home")},show:function(a){a=pages.get(a);a=a.view?a.view:new pageView({model:a});$(this.el).html(a.el)}});window.App=new site($("script[type=text/template]"));Backbone.history.start()});